id: 31991
name: GymRevenue
environments:
    production:
        domain: grp.capeandbay.com
        memory: 1024
        cli-memory: 512
        runtime: docker
        cache: gr-prototype
        storage: gymrevenue-p
        database: gymrevenue
        queues:
            - grp-production-events
            - grp-production-jobs
        build:
            - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
            - 'php artisan event:cache'
            - 'php artisan sidecar:deploy'
            - 'npm ci && npm run prod && rm -rf node_modules'
        deploy:
          - 'php artisan sidecar:activate'
    staging:
        domain: grp-stage.capeandbay.com
        memory: 1024
        cli-memory: 512
        database: mango
        cache: gr-prototype
        cli-timeout: 900
        storage: gymrevenue-stage
        runtime: docker
        queues:
            - grp-staging-events
            - grp-staging-jobs
        build:
            - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install'
            - 'php artisan event:cache'
            - 'php artisan sidecar:deploy'
            - 'npm ci && npm run prod && rm -rf node_modules'
        deploy:
          - 'php artisan sidecar:activate'
    develop:
        domain: dev.gymrevenue.com
        memory: 2048
        cli-memory: 512
        network: gymrevenue-vpc-network
        database: gr-west-dev
        cache: gr-cache
        cli-timeout: 900
        storage: gymrevenue-west-dev
        runtime: docker
        balancer: lb-gymrevenue
        queues:
            - grp-develop-events
            - grp-develop-jobs
        build:
            - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install'
            - 'php artisan event:cache'
            - 'php artisan sidecar:deploy'
            - 'npm ci && npm run dev && rm -rf node_modules'
        deploy:
          - 'php artisan sidecar:activate'
